<!DOCTYPE html>
<html>
<head>
    <title>A Terrifying Ghost Story</title>
    <!-- Add the viewport meta tag -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Base styles */
        body {
            background-color: black;
            color: white;
            font-family: monospace;
            text-align: center;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #content {
            width: 100%;
            max-width: 50%;
            padding-top: 5%;
            margin: auto;
        }

        #image-container {
            display: flex;
            justify-content: center;
            align-items: center;
            border: 8px solid transparent;
            border-image: linear-gradient(to bottom right, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0.5)) 1;
            animation: borderColor 2s linear infinite alternate;
            border-radius: 10px;
            margin-bottom: 20px;
            max-width: 300%;
            width: 100%;
            margin: 0 auto;
            transition: transform 1s ease-in-out;


        }

        #image-container img {
            width: 100%;
            height: auto;
            max-width: 100%;
            transition: transform 1s ease-in-out; 
            image-rendering: -moz-crisp-edges;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: pixelated;
            -ms-interpolation-mode: nearest-neighbor;
        }

        #text {
            font-size: 1.5em;
            padding: 20px;
            font-style: italic;
            max-width: 800px;
            margin: 0 auto;
        }

        .choice-button {
            display: inline-block;
            padding: 15px 25px;
            margin: 10px;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            font-weight: bold;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.5s, opacity 0.5s, top 1s;
            position: relative;
            font-size: 1.25em;
            max-width: 90%;
            white-space: normal;
            word-wrap: break-word;
        }

        .slide-out {
            animation: slideOut 1s forwards;
        }

        /* Class to trigger slide-in animation */
        .slide-in {
            animation: slideIn 1s forwards;
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            #content {
                max-width: 200%;
                padding-top: 10%;
                margin: 0;

            }

            #image-container {
                max-width:80%; /* Allows container to be full width */
            }
            /* #image-container img {
                
            } */

            #text {
                font-size: 1em;
            }

            .choice-button {
                padding: 12px 20px;
                font-size: 0.9em;
            }
        }

        /* Button animations */
        .choice-button.clicked {
            transform: scale(1.5);
        }

        .choice-button.fall {
            transform: scale(0.5);
            top: 500px;
            opacity: 0;
        }

        .hidden {
            opacity: 0;
        }

        /* Border animation */
        @keyframes borderColor {
            0% {
                border-image: linear-gradient(to bottom right, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0.5)) 1;
            }
            100% {
                border-image: linear-gradient(to bottom right, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 1)) 1;
            }
        }

        /* @keyframes slideOut {
            from { transform: translateX(0); }
            to { transform: translateX(100%); }
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }        */
    </style>
</head>
<body>
    <div id="content">
        <div id="image-container">
            <img id="image" src="" alt="" />
        </div>
        <div id="text"></div>
        <div id="choices"></div>
    </div>
    <script>
        const storyData = {
            "mainMenu": {
                id: "mainMenu",
                text: "My Ghost Story",
                imageName: "beginning.png",
                choices: [
                    {text: "Begin", destinationID: "start"},
                    {text: "Credits", destinationID: "credits"}
                ]
            },
            "credits": {
                id: "credits",
                text: "By Arthur Hickman and Jesse Sheehan",
                imageName: "Ghost1.jpeg",
                choices: [
                    {text: "Back", destinationID: "mainMenu"},
                    
                ]
            },
            "start": {
                id: "start",
                text: "Suddenly... I'm awake. Floating above the ground...",
                imageName: "awake.png",
                choices: [
                    {text: "I must be a ghost", destinationID: "aGhost"},
                    {text: "I can fly!", destinationID: "firstFlying"}
                ]
            },
            "aGhost": {
                id: "aGhost",
                text: "A ghost? Yes. So that must mean",
                imageName: "ghosthand.png",
                choices: [
                    {text: "I'm dead.", destinationID: "dead"}
                ]
            },
            "firstFlying": {
                id: "firstFlying",
                text: "I'm the first flying man in human history!",
                imageName: "firstflying.png",
                choices: [
                    {text: "I've got to tell the newspaper", destinationID: "newspaper"},
                    {text: "Wait, why can I see through my hand? Could I be a...", destinationID: "aGhost"}
                ]
            },
            "newspaper": {
                id: "newspaper",
                text: "I reach to call my contacts at the paper, but my hand passes through my phone. Does this mean what I think it means?",
                imageName: "handpass.png",
                choices: [
                    {text: "I must be a...", destinationID: "aGhost"}
                ]
            },
            "dead": {
                id: "dead",
                text: "Wow. I'm overwhelmed with feelings both physical and emotional",
                imageName: "skull.png",
                choices: [
                    {text: "The weather here feels... hot and dry... mate", destinationID: "austrailia"}
                ]
            },
            "austrailia": {
                id: "austrailia",
                text: "Was... Was I in Austrailia? But... why was I there?",
                imageName: "overwhelmed.png",
                choices: [
                    {text: "It was a vacation, I always wanted to see the outback", destinationID: "trip"},
                    {text: "There was a content involving cereal boxes. I won a free trip to Sydney", destinationID: "trip"},
                    {text: "I never even wanted to be on this trip", destinationID: "work"}
                ]
            },
            "trip": {
                id: "trip",
                text: "Of course! My trip down under... But what was I actually doing there?",
                imageName: "inaustrailia.png",
                choices: [
                    {text: "I was watching TV in my hotel room. It was too hot outside!", destinationID: "hotel"},
                    {text: "I was on an excursion. Foolish, for a city guy like me.", destinationID: "excursion"},
                    {text: "Work. Even when I was on vacation, I was always working.", destinationID: "work"}
                ]
            },
            "work": {
                id: "work",
                text: "Work always did control my life...",
                imageName: "ghostform.png",
                choices: [
                    {text: "I was quite the working stiff", destinationID: "timeOffice"}
                ]
            },
            "hotel": {
                id: "hotel",
                text: "So... am i actually just safe in my hotel room?",
                imageName: "Ghost2.jpeg",
                choices: [
                    {text: "Maybe I'm not dead...", destinationID: "dream"}
                ]
            },
            "excursion": {
                id: "excursion",
                text: "I should have followed my natural inclination to stay indoors. But I didn't. And I died. What's the last thing I remember seeing?",
                imageName: "Ghost3.jpeg",
                choices: [
                    {text: "Some sand, some shrubs. And then I remember taking my taxi back to my hotel...", destinationID: "wait"},
                    {text: "A big round eye", destinationID: "bird"},
                    {text: "A beak, a crown of bone, then... black...", destinationID: "bird"}
                ]
            },
            "timeOffice": {
                id: "timeOffice",
                text: "They say that at the end of one's life, nobody ever wished they spent more time at the office.",
                imageName: "Ghost1.jpeg",
                choices: [
                    {text: "That's so true", destinationID: "stepAway"},
                    {text: "Actually, I wish  do spent more time at the office", destinationID: "cubicle"}
                ]
            },
            "stepAway": {
                id: "stepAway",
                text: "Good thinking I was able to step away and enjoy my trip for a little while. But what was I doing?",
                imageName: "Ghost2.jpeg",
                choices: [
                {text: "I was watching TV in my hotel room. It was too hot outside!", destinationID: "hotel"},
                {text: "I was on an excursion. Foolish, for a city guy like me.", destinationID: "excursion"},
                ]
            },
            // WORK/AWAKEN IN CUBICLE INCOMPLETE
            "cubicle": {
                id: "cubicle",
                text: "In a sudden flash, I'm transported to my cubicle. It's a true paradise, and I never have to leave.",
                imageName: "Ghost3.jpeg",
                choices: [
                    {text: "STORY INCOMPLETE - START OVER", destinationID: "mainMenu"} // CHANGE FROM mainMenu
                ]
            },
            // HOTEL/WAKE FROM DREAM INCOMPLETE
            "dream": {
                id: "dream",
                text: "I awake from my dream.",
                imageName: "Ghost1.jpeg",
                choices: [
                    {text: "STORY INCOMPLETE - START OVER", destinationID: "mainMenu"} // CHANGE FROM mainMenu
                ]
            },
            "wait": {
                id: "wait",
                text: "And then I remember being inside for a while...",
                imageName: "Ghost2.jpeg",
                choices: [
                    {text: "Wait...", destinationID: "hotel"}
                ]
            },
            "bird": {
                id: "bird",
                text: "Ahh, that bird. That horrible bird!!",
                imageName: "Ghost3.jpeg",
                choices: [
                    {text: "I remember! I remember everything!", destinationID: "inPresent"}
                ]
            },
            "inPresent": {
                id: "inPresent",
                text: "Now that I've regained my memories, I'm back in the present day. Yet here's that bird in front of me, silent and motionless...",
                imageName: "Ghost1.jpeg",
                choices: [
                    {text: "I must attack it. I will have my revenge!", destinationID: "attackBird"},
                    {text: "I place a forgiving kiss on its beak. Their suffering is now over, as is my own.", destinationID: "tasteBird"},
                    {text: "I'll wait for the beast to move. Maybe it's only pretending to be taxidermied...", destinationID: "waitForBird"}
                ]
            },
            "attackBird": {
                id: "attackBird",
                text: "The bird falls over, stiff as a board. Some stuffing comes out of a hole in its neck.",
                imageName: "Ghost2.jpeg",
                choices: [
                    {text: "Keep going! It has more suffering to do!", destinationID: "attackBird2"},
                    {text: "This is pointless...", destinationID: "nothingLeft"}
                ]
            },
            "tasteBird": {
                id: "tasteBird",
                text: "Eugh... it tastes really bad.",
                imageName: "Ghost3.jpeg",
                choices: [
                    {text: "I was trying to be nice, but this is the thanks I get? I attack the evil-tasting bird!", destinationID: "attackBird"},
                    {text: "Inspite of its foul, fowl taste, I will be the bigger human... or the only human, and forgive it for tasting to so bad", destinationID: "nothingLeft"}
                ]
            },
            "waitForBird": {
                id: "waitForBird",
                text: "I see through your elaborate, cotton-stuffed ruse, vile creature!",
                imageName: "Ghost1.jpeg",
                choices: [
                    {text: "You cannot fool me - I'll wait!", destinationID: "waitForBird2"},
                ]
            },
            "waitForBird2": {
                id: "waitForBird",
                text: "...Hm... It still hasn't moved an inch...",
                imageName: "Ghost2.jpeg",
                choices: [
                    {text: "Give it another minute", destinationID: "waiting1"},
                    {text: "Actually, I think it's really dead", destinationID: "enoughWaiting"},
                ]
            },
            "waiting1": {
                id: "waiting1",
                text: "Hmm...",
                imageName: "Ghost3.jpeg",
                choices: [
                    {text: "I'll wait longer", destinationID: "waiting2"}
                ]
            },
            "waiting2": {
                id: "waiting2",
                text: "*sigh*... hmm hm hmmm...",
                imageName: "Ghost1.jpeg",
                choices: [
                    {text: "...", destinationID: "waiting3"}
                ]
            },
            "waiting3": {
                id: "waiting3",
                text: "Okay I think it's really dead.",
                imageName: "Ghost2.jpeg",
                choices: [
                    {text: "Finally!", destinationID: "enoughWaiting"}
                ]
            },
            "enoughWaiting": {
                id: "enoughWaiting",
                text: "Right then... now what to do about this avian beast?",
                imageName: "Ghost3.jpeg",
                choices: [
                    {text: "I must attack it! I still crave revenge.", destinationID: "attackBird"},
                    {text: "I give it a forgiving kiss on the beak. Its suffering is over, as is my own", destinationID: "tasteBird"}
                ]
            },
            "nothingLeft": {
                id: "nothingLeft",
                text: "There's nothing left for me in this Austrailian attic. What now?",
                imageName: "Ghost1.jpeg",
                choices: [
                    {text: "If I wait long enough, maybe something will happen", destinationID: "nothingHappens"},
                    {text: "I leave", destinationID: "leaveAttic"}
                ]
            },
            //Attacking bird
            "attackBird2": {
                id: "attackBird2",
                text: "I pount its stupid beak into the stupid floor. I grind it down to nothing but cotton, feathers, and dust",
                imageName: "Ghost2.jpeg",
                choices: [
                    {text: "Surely, this was my unfinished business. Surely I'll be free now.", destinationID: "reconstitutes"}
                ]
            },
            "reconstitutes": {
                id: "reconstitutes",
                text: "No... before my eyes, the wretched beast reconstitutes itself!",
                imageName: "Ghost3.jpeg",
                choices: [
                    {text: "Run!", destinationID: "run"},
                    {text: "I must stand my ground", destinationID: "futile"}
                ]
            },
            "run": {
                id: "run",
                text: "I try to flee, but it's too fast - fueled by pure hellfire!",
                imageName: "Ghost1.jpeg",
                choices: [
                    {text: "I can't keep running much further!", destinationID: "futile"}
                ]
            },
            "futile": {
                id: "futile",
                text: "My efforts are futile! The monster pecks and pecks at my poor head.",
                imageName: "Ghost2.jpeg",
                choices: [
                    {text: "I Accept this second death... and whatever comes next...", destinationID: "ectoplasmic"},
                    {text: "Thrash around and really draw it out", destinationID: "thrash"},
                ]
            },
            "thrash": {
                id: "thrash",
                text: "Success! It takes a really long time, but eventually the bird does kill me. I'd like to say it's equally unpleasant for both of us, but the bird doesn't seem to mind.",
                imageName: "Ghost3.jpeg",
                choices: [
                    {text: "I've died a second time. A death... within a death", destinationID: "ectoplasmic"}
                ]
            },
            "ectoplasmic": {
                id: "ectoplasmic",
                text: "My ghostly form has been bashed into an ectoplasmic putty",
                imageName: "Ghost1.jpeg",
                choices: [
                    {text: "I'm quite repulsive", destinationID: "void"}
                ]
            },
            "void": {
                id: "void",
                text: "I find myself falling through a great void, with no company, but my own thoughts and memories. After a long time, even those escape me...",
                imageName: "Ghost2.jpeg",
                choices: [
                    {text: "Who am I?", destinationID: "blankness"},
                    {text: "Where am I?", destinationID: "blankness"},
                ]
            },
            "blankness": {
                id: "blankness",
                text: "It doesn't matter... Before I'm subsumed by a calming blankness, I wonder if I make up somewhere new, where perhaps, I could make new choices...",
                imageName: "Ghost3.jpeg",
                choices: [
                    {text: "Unlikely, but it's a nice thought", destinationID: "start"},
                ]
            },
            "nothingHappens": {
                id: "nothingHappens",
                text: "Hm. Nothing is happening. Occasionally a rat or spider scamper around, but it doesn't really change my situation.",
                imageName: "Ghost1.jpeg",
                choices: [
                    {text: "I guess I'll just leave", destinationID: "leaveAttic"},
                ]
            },
            "leaveAttic": {
                id: "leaveAttic",
                text: "I descend upon the attic ladder and drift down. A veil of dust obscures the upstairs hallway. Man, this place really...",
                imageName: "Ghost2.jpeg",
                choices: [
                    {text: "....has a lot of character", destinationID: "hallway"},
                    {text: "...sucks!", destinationID: "hallway"},
                ]
            },
            "hallway": {
                id: "hallway",
                text: "The house reeks of rotting taxidermy. Or I'm sure it would if I could still smell.",
                imageName: "Ghost3.jpeg",
                choices: [
                    {text: "I guess I never realized ghosts can't't smell.", destinationID: "oldMan"},
                ]
            },
            "oldMan": {
                id: "oldMan",
                text: "I continue my descent, down the stairs, where an old man sits in an easy chair. I should...",
                imageName: "Ghost1.jpeg",
                choices: [
                    {text: "say hello", destinationID: "sayHello"},
                    {text: "scare him!", destinationID: "scareHim"},
                    {text: "leave him be.", destinationID: "leaveHim"},
                ]
            },
            //THIS ONE ISN'T FINISHED

            "sayHello": {
                id: "sayHello",
                text: "Well... here it goes",
                imageName: "Ghost2.jpeg",
                choices: [
                    {text: "Hello", destinationID: "hunterAwakens"},
                    {text: "Oi there, Mate!", destinationID: "hunterAwakens"},
                ]
            },
            //THIS ONE ISN'T FINISHED
            "leaveHim": {
                id: "",
                text: "",
                imageName: "Ghost3.jpeg",
                choices: [
                    {text: "STORY UNFINISHED - START OVER", destinationID: "start"},
                ]
            },
            "scareHim": {
                id: "scareHim",
                text: "Here goes nothing",
                imageName: "Ghost1.jpeg",
                choices: [
                    {text: "Boo!", destinationID: "hunterAwakens"},
                    {text: "OooOoOoOoOo!", destinationID: "hunterAwakens"},
                ]
            },
            "hunterAwakens": {
                id: "hunterAwakens",
                text: "The old man stirs, I now see he's fallen asleep with a hunting rifle in his lap",
                imageName: "Ghost2.jpeg",
                choices: [
                    {text: "STORY UNFINISHED - START OVER", destinationID: "mainMenu"}, // change from mainMenu
                ]
            }, /*
            "": {
                id: "",
                text: "",
                imageName: "Ghost3.jpeg",
                choices: [
                    {text: "", destinationID: ""},
                ]
            }, */
        };

        let currentNodeID = "mainMenu";
        let tappedChoice = null;

        function handleChoiceTap(choice) {
    tappedChoice = choice.text;
    const buttons = document.querySelectorAll('.choice-button');
    const imageElement = document.getElementById('image');
    const imageContainer = document.getElementById('image-container');
    const textElement = document.getElementById('text');

    // Handle button animations
    buttons.forEach(button => {
        if (button.textContent === tappedChoice) {
            button.classList.add('clicked');
            setTimeout(() => {
                button.classList.add('fall');
            }, 500);
        } else {
            button.classList.add('hidden');
        }
    });

    // Fade out the text, image, and image container
    setTimeout(() => {
        textElement.style.transition = 'opacity 0.5s ease-in-out';
        textElement.style.opacity = 0;
        imageElement.style.transition = 'opacity 1s ease-in-out';
        imageElement.style.opacity = 0;
        imageContainer.style.transition = 'opacity 1s ease-in-out';
        imageContainer.style.opacity = 0;
    }, 500);

    // After fade out is complete, update the node and fade in new content
    setTimeout(() => {
        currentNodeID = choice.destinationID;
        resetAnimations();
        showCurrentNode();
    }, 1500);
}

function showCurrentNode() {
    const currentNode = storyData[currentNodeID];
    const imageElement = document.getElementById('image');
    const imageContainer = document.getElementById('image-container');
    const textElement = document.getElementById('text');
    const choicesElement = document.getElementById('choices');

    // Reset opacity to 0 to prepare for fade-in
    imageElement.style.opacity = 0;
    imageContainer.style.opacity = 0;
    textElement.style.opacity = 0;

    // Update image
    if (currentNode.imageName) {
        // Set the image source
        imageElement.src = currentNode.imageName;

        // Once the image is loaded, fade in the image and container
        imageElement.onload = function() {
            // Fade in the image and container after a slight delay
            setTimeout(() => {
                imageElement.style.opacity = 1;
                imageContainer.style.opacity = 1;
            }, 50); // Adjust delay as needed
        };

        imageElement.style.display = 'inline';
    } else {
        imageElement.style.display = 'none';
    }

    // Update text
    textElement.textContent = currentNode.text;

    // Fade in the text after a slight delay
    setTimeout(() => {
        textElement.style.opacity = 1;
    }, 100); // Adjust delay as needed

    // Clear previous choices
    choicesElement.innerHTML = '';

    // Create choice buttons
    if (currentNode.choices) {
        currentNode.choices.forEach(choice => {
            const button = document.createElement('button');
            button.className = 'choice-button';
            button.textContent = choice.text;
            button.addEventListener('click', () => {
                handleChoiceTap(choice);
            });
            choicesElement.appendChild(button);
        });
    }
}

        function resetAnimations() {
            tappedChoice = null;
        }

        // Start the story
        showCurrentNode();
        </script>
        </body>
</html>